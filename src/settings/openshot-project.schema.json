{
 "$schema": "http://json-schema.org/draft-04/schema#",
 "additionalProperties": true,
 "title": "OpenShot Video Editor project file schema",
 "definitions": {
  "comment": {
   "title": "Comment:",
   "type": "string",
   "format": "textarea",
   "default": ""
  },
  "yesno": {
   "default": "yes",
   "type": "string",
   "enum": [
    "yes",
    "no"
   ]
  },
  "ratio": {
   "type": "object",
   "properties": {
    "num": {"type": "integer", "default": 1},
    "den": {"type": "integer", "default": 1}
   },
   "required": ["num", "den"]
  },
  "samplerate": {
   "type": "integer",
   "default": 44100,
   "anyOf": [
    {"multipleOf": 22050, "minimum": 22050, "maximum": 44100},
    {"multipleOf": 48000, "minimum": 48000, "maximum": 192000}
   ]
  },
  "unique_identifier": {
   "anyOf": [
    {"type": "string", "pattern": "^[A-Z0-9]{10}$"},
    {"type": "string", "pattern": "^[LT][0-9]"}
   ]
  },
  "x_coord": {
   "type": "number",
   "multipleOf": 1.0,
   "minimum": 1.0
  },
  "coordinate_pair": {
   "type": "object",
   "properties": {
    "X": {"type": "number"},
    "Y": {"type": "number"}
   },
   "required": ["X", "Y"]
  },
  "keyframe_point": {
   "type": "object",
   "properties": {
    "co": {"$ref": "#/definitions/coordinate_pair"},
    "handle_left": {"$ref": "#/definitions/coordinate_pair"},
    "handle_right": {"$ref": "#/definitions/coordinate_pair"},
    "handle_type": {"type": "integer", "minimum": 0, "maximum": 1},
    "interpolation": {"type": "integer", "minimum": 0, "maximum": 2}
   },
   "required": ["co", "interpolation"],
   "dependencies": {
    "handle_type": ["handle_left", "handle_right"],
    "handle_left": ["handle_right", "handle_type"],
    "handle_right": ["handle_left", "handle_type"]
   }
  },
  "keyframe_list": {
   "type": "object",
   "items": { 
    "Points": {
     "type": "array",
     "items": {"$ref": "#definitions/keyframe_point"}
    }
   }
  },
  "layer_item": {
   "type": "object",
   "properties": {
    "y": {"type": "integer"},
    "number": {"type": "integer", "minimum": 1},
    "id": {"$ref": "#/definitions/unique_identifier"},
    "label": {"type": "string"},
    "lock": {"type": "boolean"}
   },
   "required": ["id", "number"]
  }
 },
 "type": "object",
 "id": "https://niebert.github.io/json-editor",
 "options": {
  "disable_collapse": false,
  "disable_edit_json": false,
  "disable_properties": false,
  "collapsed": false,
  "hidden": false
 },
 "defaultProperties": [
  "settings",
  "id",
  "scale",
  "tick_pixels",
  "progress",
  "playhead_position",
  "export_path",
  "import_path",
  "profile",
  "duration",
  "fps",
  "width",
  "height",
  "pixel_ratio",
  "display_ratio",
  "channels",
  "channel_layout",
  "sample_rate",
  "files",
  "layers",
  "clips",
  "effects",
  "markers",
  "history",
  "version"
 ],
 "properties": {
  "settings": {
   "type": "object"
  },
  "id": {"$ref": "#/definitions/unique_identifier"},
  "tick_pixels": {
   "type": "integer",
   "default": 100
  },
  "effects": {
   "type": "array"
  },
  "profile": {
   "type": "string",
   "default": "HD 1080p 30 fps",
   "format": "text"
  },
  "fps": { "$ref": "#/definitions/ratio" },
  "export_path": {
   "type": "string",
   "default": "",
   "format": "text"
  },
  "layers": {
   "type": "array",
   "items": {"$ref": "#/definitions/layer_item"}
  },
  "clips": {
   "type": "array",
   "items": {
    "type": "object",
    "defaultProperties": [
     "alpha",
     "anchor",
     "channel_filter",
     "channel_mapping",
     "crop_height",
     "crop_width",
     "crop_x",
     "crop_y",
     "display",
     "duration",
     "effects",
     "end",
     "gravity",
     "has_audio",
     "has_video",
     "id",
     "layer",
     "location_x",
     "location_y",
     "mixing",
     "origin_x",
     "origin_y",
     "perspective_c1_x",
     "perspective_c1_y",
     "perspective_c2_x",
     "perspective_c2_y",
     "perspective_c3_x",
     "perspective_c3_y",
     "perspective_c4_x",
     "perspective_c4_y",
     "position",
     "reader",
     "rotation",
     "scale",
     "scale_x",
     "scale_y",
     "shear_x",
     "shear_y",
     "start",
     "time",
     "volume",
     "wave_color",
     "waveform",
     "file_id",
     "title",
     "image"
    ],
    "properties": {
     "alpha": {"$ref": "#/definitions/keyframe_list"},
     "anchor": {"type": "integer", "default": 0},
     "channel_filter": {"$ref": "#/definitions/keyframe_list"},
     "channel_mapping": {"$ref": "#/definitions/keyframe_list"},
     "crop_height": {"$ref": "#/definitions/keyframe_list"},
     "crop_width": {"$ref": "#/definitions/keyframe_list"},
     "crop_x": {"$ref": "#/definitions/keyframe_list"},
     "crop_y": {"$ref": "#/definitions/keyframe_list"},
     "display": {"type": "integer", "default": 0},
     "duration": {"type": "number", "default": 0.0},
     "effects": {
      "type": "array",
      "items": {
       "type": "object",
       "defaultProperties": [
        "class_name",
        "description",
        "duration",
        "end",
        "has_audio",
        "has_video",
        "id",
        "layer",
        "name",
        "order",
        "position",
        "start",
        "type"
       ],
       "properties": {
        "bottom": {"$ref": "#/definitions/keyframe_list"},
        "class_name": {
         "type": "string",
         "default": "",
         "format": "text"
        },
        "description": {
         "type": "string",
         "default": "",
         "format": "text"
        },
        "duration": {
         "type": "number",
         "default": 0.0
        },
        "end": {
         "type": "number",
         "default": 0.0
        },
        "has_audio": {
         "type": "boolean",
         "format": "checkbox",
         "default": false
        },
        "has_video": {
         "type": "boolean",
         "format": "checkbox",
         "default": true
        },
        "id": {"$ref": "#/definitions/unique_identifier"},
        "layer": {
         "type": "integer",
         "default": 0
        },
        "left": {"$ref": "#/definitions/keyframe_list"},
        "name": {
         "type": "string",
         "default": "",
         "format": "text"
        },
        "order": {
         "type": "integer",
         "default": 0
        },
        "pixelization": {"$ref": "#/definitions/keyframe_list"},
        "position": {
         "type": "number",
         "default": 0.0
        },
        "right": {"$ref": "#/definitions/keyframe_list"},
        "start": {"type": "number", "default": 0.0},
        "top": {"$ref": "#/definitions/keyframe_list"},
        "type": {
         "type": "string",
         "default": "",
         "format": "text"
        }
       }
      }
     },
     "end": {"type": "number", "default": 0.0},
     "gravity": {
      "type": "integer",
      "default": 0
     },
     "has_audio": {"$ref": "#/definitions/keyframe_list"},
     "has_video": {"$ref": "#/definitions/keyframe_list"},
     "id": {"$ref": "#/definitions/unique_identifier"},
     "layer": {
      "type": "integer",
      "default": 1000000
     },
     "location_x": {"$ref": "#/definitions/keyframe_list"},
     "location_y": {"$ref": "#/definitions/keyframe_list"},
     "mixing": {"type": "integer", "default": 0},
     "perspective_c1_x": {"$ref": "#/definitions/keyframe_list"},
     "perspective_c1_y": {"$ref": "#/definitions/keyframe_list"},
     "perspective_c2_x": {"$ref": "#/definitions/keyframe_list"},
     "perspective_c2_y": {"$ref": "#/definitions/keyframe_list"},
     "perspective_c3_x": {"$ref": "#/definitions/keyframe_list"},
     "perspective_c3_y": {"$ref": "#/definitions/keyframe_list"},
     "perspective_c4_x": {"$ref": "#/definitions/keyframe_list"},
     "perspective_c4_y": {"$ref": "#/definitions/keyframe_list"},
     "position": {"type": "number", "default": 0.0},
     "reader": {
      "type": "object",
      "defaultProperties": [
       "acodec",
       "audio_bit_rate",
       "audio_stream_index",
       "audio_timebase",
       "channel_layout",
       "channels",
       "display_ratio",
       "duration",
       "file_size",
       "fps",
       "has_audio",
       "has_single_image",
       "has_video",
       "height",
       "interlaced_frame",
       "metadata",
       "path",
       "pixel_format",
       "pixel_ratio",
       "sample_rate",
       "top_field_first",
       "type",
       "vcodec",
       "video_bit_rate",
       "video_length",
       "video_stream_index",
       "video_timebase",
       "width"
      ],
      "properties": {
       "acodec": {
        "type": "string",
        "default": "",
        "format": "text"
       },
       "audio_bit_rate": {
        "type": "integer",
        "default": 0
       },
       "audio_stream_index": {
        "type": "integer",
        "default": 1
       },
       "audio_timebase": {"$ref": "#/definitions/ratio"},
       "channel_layout": {
        "type": "integer",
        "default": 3
       },
       "channels": {
        "type": "integer",
        "default": 2
       },
       "display_ratio": {"$ref": "#/definitions/ratio"},
       "duration": {
        "type": "number",
        "default": 0.0
       },
       "file_size": {
        "type": "string",
        "default": "0",
        "format": "text"
       },
       "fps": {"$ref": "#/definitions/ratio"},
       "has_audio": {
        "type": "boolean",
        "format": "checkbox",
        "default": true
       },
       "has_single_image": {
        "type": "boolean",
        "format": "checkbox",
        "default": false
       },
       "has_video": {
        "type": "boolean",
        "format": "checkbox",
        "default": true
       },
       "height": {
        "type": "integer",
        "default": 720
       },
       "interlaced_frame": {
        "type": "boolean",
        "format": "checkbox",
        "default": false
       },
       "metadata": {"type": "object"},
       "path": {
        "type": "string",
        "default": "",
        "format": "text"
       },
       "pixel_format": {"type": "integer", "default": 0},
       "pixel_ratio": {"$ref": "#/definitions/ratio"},
       "sample_rate": {"$ref": "#/definitions/samplerate"},
       "top_field_first": {
        "type": "boolean",
        "format": "checkbox",
        "default": true
       },
       "type": {
        "type": "string",
        "default": "FFmpegReader",
        "format": "text"
       },
       "vcodec": {
        "type": "string",
        "default": "",
        "format": "text"
       },
       "video_bit_rate": {
        "type": "integer",
        "default": 0
       },
       "video_length": {
        "type": "string",
        "default": "",
        "format": "text"
       },
       "video_stream_index": {"type": "integer", "default": 0},
       "video_timebase": {"$ref": "#/definitions/ratio"},
       "width": {
        "type": "integer",
        "default": 1280
       }
      }
     },
     "rotation": {"$ref": "#/definitions/keyframe_list"},
     "scale": {"type": "integer", "default": 1},
     "scale_x": {"$ref": "#/definitions/keyframe_list"},
     "scale_y": {"$ref": "#/definitions/keyframe_list"},
     "shear_x": {"$ref": "#/definitions/keyframe_list"},
     "shear_y": {"$ref": "#/definitions/keyframe_list"},
     "start": {"type": "number", "default": 0.0},
     "time": {"$ref": "#/definitions/keyframe_list"},
     "volume": {"$ref": "#/definitions/keyframe_list"},
     "wave_color": {
      "type": "object",
      "required": ["alpha", "blue", "green", "red"],
      "properties": {
       "alpha": {"$ref": "#/definitions/keyframe_list"},
       "blue": {"$ref": "#/definitions/keyframe_list"},
       "green": {"$ref": "#/definitions/keyframe_list"},
       "red": {"$ref": "#/definitions/keyframe_list"}
      }
     },
     "waveform": {
      "type": "boolean",
      "format": "checkbox",
      "default": false
     },
     "file_id": {"$ref": "#/definitions/unique_identifier"},
     "title": {
      "type": "string",
      "default": "",
      "format": "text"
     },
     "image": {
      "type": "string",
      "default": "",
      "format": "text"
     }
    }
   }
  },
  "markers": {"type": "array"},
  "files": {
   "type": "array",
   "format": "tabs",
   "items": {
    "type": "object",
    "defaultProperties": [
     "acodec",
     "audio_bit_rate",
     "audio_stream_index",
     "audio_timebase",
     "channel_layout",
     "channels",
     "display_ratio",
     "duration",
     "file_size",
     "fps",
     "has_audio",
     "has_single_image",
     "has_video",
     "height",
     "interlaced_frame",
     "metadata",
     "path",
     "pixel_format",
     "pixel_ratio",
     "sample_rate",
     "top_field_first",
     "type",
     "vcodec",
     "video_bit_rate",
     "video_length",
     "video_stream_index",
     "video_timebase",
     "width",
     "media_type",
     "id",
     "image"
    ],
    "properties": {
     "acodec": {
      "type": "string",
      "default": "",
      "format": "text"
     },
     "audio_bit_rate": {
      "type": "integer",
      "default": 0
     },
     "audio_stream_index": {
      "type": "integer",
      "default": 1
     },
     "audio_timebase": { "$ref": "#/definitions/ratio" },
     "channel_layout": {
      "type": "integer",
      "default": 3
     },
     "channels": {
      "type": "integer",
      "default": 2
     },
     "display_ratio": { "$ref": "#/definitions/ratio" },
     "duration": {
      "type": "number",
      "default": 0.0
     },
     "file_size": {
      "type": "string",
      "default": "0",
      "format": "text"
     },
     "fps": { "$ref": "#/definitions/ratio" },
     "has_audio": {
      "type": "boolean",
      "format": "checkbox",
      "default": true
     },
     "has_single_image": {
      "type": "boolean",
      "format": "checkbox",
      "default": false
     },
     "has_video": {
      "type": "boolean",
      "format": "checkbox",
      "default": true
     },
     "height": {
      "type": "integer",
      "default": 720
     },
     "interlaced_frame": {
      "type": "boolean",
      "format": "checkbox",
      "default": false
     },
     "metadata": {"type": "object"},
     "path": {
      "type": "string",
      "default": "",
      "format": "text"
     },
     "pixel_format": {
      "type": "integer",
      "default": 0
     },
     "pixel_ratio": {"$ref": "#/definitions/ratio"},
     "sample_rate": {"$ref": "#/definitions/samplerate"},
     "top_field_first": {
      "type": "boolean",
      "format": "checkbox",
      "default": true
     },
     "type": {
      "type": "string",
      "default": "FFmpegReader",
      "format": "text"
     },
     "vcodec": {
      "type": "string",
      "default": "",
      "format": "text"
     },
     "video_bit_rate": {
      "type": "integer",
      "default": 0
     },
     "video_length": {
      "type": "string",
      "default": "0",
      "format": "text"
     },
     "video_stream_index": {
      "type": "integer",
      "default": 0
     },
     "video_timebase": {"$ref": "#/definitions/ratio"},
     "width": {
      "type": "integer",
      "default": 1280
     },
     "media_type": {
      "type": "string",
      "default": "video",
      "enum": ["video", "audio", "image", "project"]
     },
     "id": {"$ref": "#/definitions/unique_identifier"},
     "image": {
      "type": "string",
      "default": "",
      "format": "text"
     }
    }
   }
  },
  "duration": {
   "type": "number",
   "default": 0
  },
  "channels": {
   "type": "integer",
   "default": 2
  },
  "height": {
   "type": "integer",
   "default": 1080
  },
  "pixel_ratio": { "$ref": "#/definitions/ratio" },
  "version": {
   "type": "object",
   "required": ["openshot-qt", "libopenshot"],
   "properties": {
    "openshot-qt": {
     "type": "string",
     "default": "2.5.1",
     "format": "text"
    },
    "libopenshot": {
     "type": "string",
     "default": "0.2.5",
     "format": "text"
    }
   }
  },
  "progress": {"type": "array"},
  "import_path": {
   "type": "string",
   "default": "",
   "format": "text"
  },
  "width": {
   "type": "integer",
   "default": 1920
  },
  "scale": {
   "type": "integer",
   "default": 1
  },
  "history": {
   "type": "object",
   "required": ["redo", "undo"],
   "properties": {
    "redo": {"type": "array"},
    "undo": {"type": "array"}
   }
  },
  "playhead_position": {
   "type": "number",
   "default": 0.0
  },
  "channel_layout": {
   "type": "integer",
   "default": 3
  },
  "display_ratio": {"$ref": "#/definitions/ratio"},
  "sample_rate": {"$ref": "#/definitions/samplerate"}
 }
}
